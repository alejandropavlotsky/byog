{"ast":null,"code":"import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import UserService from'../../../service/user.service';import GameService from'../../../service/game.service';import EventService from'../../../service/events.service';import'./Profile.css';import moment from'moment';import GameForm from'./../game-form/GameForm';import EventForm from'./../eventForm/EventForm';import Container from'react-bootstrap/Container';import Col from'react-bootstrap/Col';import Row from'react-bootstrap/Row';import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.handleModal=function(visible){var modalContent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var object=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return _this.setState({modalShow:visible,modalContent:modalContent,editableObject:object});};_this.finishGamePost=function(){_this.handleModal(false,{});};_this.finishEventPost=function(){_this.handleModal(false,{});};_this.state={modalShow:false,modalContent:undefined,editableObject:{},// toast: {\n//     show: false,\n//     text: ''\n// },\nprofileData:null};_this.UserService=new UserService();_this.GameService=new GameService();_this.EventService=new EventService();_this.goBack=_this.goBack.bind(_assertThisInitialized(_this));return _this;}_createClass(Profile,[{key:\"goBack\",value:function goBack(){this.props.history.goBack();}},{key:\"deleteEvent\",value:function deleteEvent(eventId){var _this2=this;this.EventService.deleteEvent(eventId).then(function(){return _this2.getProfileInfo(_this2.props.loggedInUser._id);}).catch(function(err){return console.log(err);});}},{key:\"deleteGame\",value:function deleteGame(gameId){var _this3=this;this.GameService.deleteGame(gameId).then(function(){return _this3.getProfileInfo(_this3.props.loggedInUser._id);}).catch(function(err){return console.log(err);});}},{key:\"deleteFavorite\",value:function deleteFavorite(favId){var _this4=this;this.UserService.deleteFavorite(this.props.loggedInUser._id,favId).then(function(){return _this4.getProfileInfo(_this4.props.loggedInUser._id);}).catch(function(err){return console.log(err);});}},{key:\"getProfileInfo\",value:function getProfileInfo(id){var _this5=this;this.UserService.getProfileInfo(id).then(function(response){return _this5.setState({profileData:response.data});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.props.loggedInUser?this.getProfileInfo(this.props.loggedInUser._id):this.getProfileInfo(this.props.match.params.userId);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.match&&prevProps.match.params&&prevProps.match.params.userId&&this.props.loggedInUser){this.getProfileInfo(this.props.loggedInUser._id);}}},{key:\"render\",value:function render(){var _this6=this;this.state.profileData&&console.log(this.state.profileData.user,\"|\",this.props.profileData);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,null,this.state.profileData&&/*#__PURE__*/React.createElement(React.Fragment,null,this.props.loggedInUser?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"\\xA1Bienvend@, \",this.props.loggedInUser.username,\"!\"),/*#__PURE__*/React.createElement(\"h1\",null,\"Mis juegos\"),\" \"):/*#__PURE__*/React.createElement(\"div\",{className:\"back-button-users\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Los juegos de \",this.state.profileData.user.username),/*#__PURE__*/React.createElement(Button,{onClick:this.goBack,className:\"btn-one btn-sm edit-btn\"},\"Volver\")),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},this.state.profileData.games&&this.state.profileData.games.map(function(game){return/*#__PURE__*/React.createElement(Col,{lg:3,md:5,key:game._id,className:\"profile-game-details\"},/*#__PURE__*/React.createElement(Link,{to:\"/games/\".concat(game._id,\"/details\")},/*#__PURE__*/React.createElement(\"p\",{className:\"btn-one btn-game-title\"},game.title),/*#__PURE__*/React.createElement(\"img\",{src:game.gameImg,alt:\"gameImg\",className:\"profile-game-img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-game-details-buttons\"},_this6.state.profileData.user&&_this6.props.loggedInUser&&_this6.props.loggedInUser._id===_this6.state.profileData.user._id&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this6.handleModal(true,'game',game);},className:\"btn-sm edit-btn btn-one\"},\"Editar\"),_this6.state.profileData.user&&_this6.props.loggedInUser&&_this6.props.loggedInUser._id===_this6.state.profileData.user._id&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this6.deleteGame(game._id);},className:\"btn-sm edit-btn btn-one\"},\"Borrar\")));}),/*#__PURE__*/React.createElement(Modal,{show:this.state.modalShow,onHide:function onHide(){return _this6.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,this.state.modalContent==='game'?/*#__PURE__*/React.createElement(GameForm,Object.assign({loggedInUser:this.props.loggedInUser,finishGamePost:this.finishGamePost,closeModal:function closeModal(){return _this6.handleModal(false);}},this.state.editableObject)):/*#__PURE__*/React.createElement(EventForm,Object.assign({loggedInUser:this.props.loggedInUser,finishEventPost:this.finishEventPost,closeModal:function closeModal(){return _this6.handleModal(false);}},this.state.editableObject)))))),this.state.profileData&&/*#__PURE__*/React.createElement(React.Fragment,null,this.props.loggedInUser?/*#__PURE__*/React.createElement(\"h1\",null,\"Mis Eventos\"):/*#__PURE__*/React.createElement(\"div\",{className:\"back-button-users\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Los eventos de \",this.state.profileData.user.username)),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},this.state.profileData.events&&this.state.profileData.events.map(function(event){return/*#__PURE__*/React.createElement(Col,{md:4,key:event._id,className:\"profile-event-details\"},/*#__PURE__*/React.createElement(Link,{to:\"/events/\".concat(event._id,\"/details\")},/*#__PURE__*/React.createElement(\"p\",null,event.title),/*#__PURE__*/React.createElement(\"p\",null,moment(event.gameDate).format(\"DD/MM/YYYY h:mmA\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-event-details-buttons\"},_this6.state.profileData.user&&_this6.props.loggedInUser&&_this6.props.loggedInUser._id===_this6.state.profileData.user._id&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this6.handleModal(true,'event',event);},className:\"btn btn-sm btn-one btn-edit-event edit-btn\"},\"Editar\"),_this6.state.profileData.user&&_this6.props.loggedInUser&&_this6.props.loggedInUser._id===_this6.state.profileData.user._id&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this6.deleteEvent(event._id);},className:\"btn btn-sm btn-one btn-edit-event edit-btn\"},\"Borrar\")));}))),this.state.profileData&&/*#__PURE__*/React.createElement(React.Fragment,null,this.props.loggedInUser?/*#__PURE__*/React.createElement(\"h1\",null,\"Mis Juegos Favoritos\"):/*#__PURE__*/React.createElement(\"div\",{className:\"back-button-users\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Los Favoritos de \",this.state.profileData.user.username)),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},this.state.profileData.user.favorites.length?this.state.profileData.user.favorites.map(function(fav){return/*#__PURE__*/React.createElement(Col,{md:3,key:fav._id,className:\"profile-game-details\"},/*#__PURE__*/React.createElement(\"p\",null,fav.title),/*#__PURE__*/React.createElement(\"img\",{src:fav.gameImg,alt:\"gameImg\",className:\"profile-game-img\"}),_this6.props.loggedInUser&&_this6.props.loggedInUser._id===_this6.state.profileData.user._id&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this6.deleteFavorite(fav._id);},className:\"btn edit-btn btn-sm btn-one\"},\"Quitar de favoritos\"));}):this.props.loggedInUser&&/*#__PURE__*/React.createElement(\"p\",null,\"No tienes juegos agregados a tu lista de favoritos. Ve a la secci\\xF3n \",/*#__PURE__*/React.createElement(Link,{to:\"/games\",className:\"game-button\"},\" juegos\"),\" y agrega algunos \")))));}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/profile/Profile.js"],"names":["React","Component","Link","UserService","GameService","EventService","moment","GameForm","EventForm","Container","Col","Row","Button","Modal","Profile","props","handleModal","visible","modalContent","object","setState","modalShow","editableObject","finishGamePost","finishEventPost","state","undefined","profileData","goBack","bind","history","eventId","deleteEvent","then","getProfileInfo","loggedInUser","_id","catch","err","console","log","gameId","deleteGame","favId","deleteFavorite","id","response","data","match","params","userId","prevProps","user","username","games","map","game","title","gameImg","events","event","gameDate","format","favorites","length","fav"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport UserService from '../../../service/user.service'\nimport GameService from '../../../service/game.service'\nimport EventService from '../../../service/events.service'\n\nimport './Profile.css'\n\nimport moment from 'moment'\n\nimport GameForm from './../game-form/GameForm'\nimport EventForm from './../eventForm/EventForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Col from 'react-bootstrap/Col'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\n\n\nclass Profile extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            modalShow: false,\n            modalContent: undefined,\n            editableObject: {},\n            // toast: {\n            //     show: false,\n            //     text: ''\n            // },\n            profileData: null\n        }\n        this.UserService = new UserService()\n        this.GameService = new GameService()\n        this.EventService = new EventService()\n        this.goBack = this.goBack.bind(this);\n    }\n\n    goBack(){this.props.history.goBack()}\n\n    handleModal = (visible, modalContent = '', object = {}) => this.setState({ modalShow: visible, modalContent, editableObject: object })\n    // handletoast = (visible, text = '') => {\n    //     const toastCopy = { ...this.state.toast }\n    //     toastCopy.show = visible\n    //     toastCopy.text = text\n    //     this.setState({ toast: toastCopy })\n    // }\n\n    finishGamePost = () => {\n        this.handleModal(false, {})\n    }\n    finishEventPost = () => {\n        this.handleModal(false, {})\n    }\n    \n    deleteEvent(eventId) {\n        this.EventService.deleteEvent(eventId)\n            .then(() => this.getProfileInfo(this.props.loggedInUser._id))\n            .catch(err => console.log(err))\n    }\n\n    deleteGame(gameId) {\n        this.GameService.deleteGame(gameId)\n            .then(() => this.getProfileInfo( this.props.loggedInUser._id))\n            .catch(err => console.log(err))\n    }\n    deleteFavorite(favId) {\n        this.UserService.deleteFavorite(this.props.loggedInUser._id, favId)\n            .then(() => this.getProfileInfo(this.props.loggedInUser._id))\n            .catch(err => console.log(err))\n    }\n\n    getProfileInfo(id) {\n        this.UserService.getProfileInfo(id)\n            .then((response) => this.setState({profileData: response.data}))\n    }\n\n    componentDidMount() {\n        this.props.loggedInUser ? this.getProfileInfo(this.props.loggedInUser._id) : this.getProfileInfo(this.props.match.params.userId)\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.match && prevProps.match.params && prevProps.match.params.userId && this.props.loggedInUser) {\n            this.getProfileInfo(this.props.loggedInUser._id)\n        }\n    }\n\n\n    render() {\n        this.state.profileData && \n            console.log(this.state.profileData.user, \"|\", this.props.profileData)\n        \n        return (\n            <>\n                <Container>\n                    {\n                        this.state.profileData &&\n                        <>\n                            {this.props.loggedInUser ?  <><h1>&#161;Bienvend@, {this.props.loggedInUser.username}!</h1><h1>Mis juegos</h1> </> : <div className=\"back-button-users\"><h1>Los juegos de {this.state.profileData.user.username}</h1><Button onClick={this.goBack} className=\"btn-one btn-sm edit-btn\">Volver</Button></div>}\n                                <Row className=\"justify-content-center\">\n                                    {\n                                        this.state.profileData.games &&\n                                        this.state.profileData.games.map(game =>          \n                                            <Col lg={3} md={5} key={game._id} className=\"profile-game-details\">\n                                                <Link to={`/games/${game._id}/details`}>\n                                                    <p className=\"btn-one btn-game-title\">{game.title}</p>\n                                                    <img src={game.gameImg} alt=\"gameImg\" className=\"profile-game-img\"/>\n                                                </Link>\n                                                    <div className=\"profile-game-details-buttons\">\n                                                        {this.state.profileData.user && this.props.loggedInUser && this.props.loggedInUser._id === this.state.profileData.user._id && <Button onClick={() => this.handleModal(true, 'game', game)} className=\"btn-sm edit-btn btn-one\">Editar</Button>}\n                                                        {this.state.profileData.user &&  this.props.loggedInUser && this.props.loggedInUser._id === this.state.profileData.user._id && <Button onClick={() => this.deleteGame(game._id)} className=\"btn-sm edit-btn btn-one\">Borrar</Button>} \n                                                    </div>\n                                            </Col>)\n                                    }\n                                    <Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                                        <Modal.Body>\n                                            {\n                                            this.state.modalContent === 'game' ?\n                                                \n                                                <GameForm  loggedInUser={this.props.loggedInUser} finishGamePost={this.finishGamePost} closeModal={() => this.handleModal(false)} {...this.state.editableObject}/>\n                                                :\n                                                <EventForm loggedInUser={this.props.loggedInUser} finishEventPost={this.finishEventPost} closeModal={() => this.handleModal(false)} {...this.state.editableObject}/>\n                                            }\n                                        </Modal.Body>\n                                    </Modal>\n                                </Row>\n                        </>\n                    }       \n                    {\n                        this.state.profileData &&\n                            <>\n                                {this.props.loggedInUser ? <h1>Mis Eventos</h1> : <div className=\"back-button-users\"><h1>Los eventos de {this.state.profileData.user.username}</h1></div>}\n                                        <Row className=\"justify-content-center\">\n                                            {\n                                                this.state.profileData.events &&\n                                                this.state.profileData.events.map(event =>\n                                                    <Col md={4} key={event._id} className=\"profile-event-details\">\n                                                         <Link to={`/events/${event._id}/details`}>\n                                                            <p>{event.title}</p>\n                                                            <p>{moment(event.gameDate).format(\"DD/MM/YYYY h:mmA\")}</p>\n                                                        </Link>\n                                                            <div className=\"profile-event-details-buttons\">\n                                                                {this.state.profileData.user  && this.props.loggedInUser && this.props.loggedInUser._id === this.state.profileData.user._id && <Button onClick={() => this.handleModal(true, 'event', event)}  className=\"btn btn-sm btn-one btn-edit-event edit-btn\">Editar</Button>}\n                                                                {this.state.profileData.user  && this.props.loggedInUser && this.props.loggedInUser._id === this.state.profileData.user._id && <Button onClick={() => this.deleteEvent(event._id)} className=\"btn btn-sm btn-one btn-edit-event edit-btn\">Borrar</Button>}\n                                                            </div>\n                                                    </Col>\n                                                )\n                                                }\n                                        </Row>\n                            </>\n                    }\n                    {\n                        this.state.profileData &&\n                            <>\n                                {this.props.loggedInUser ? <h1>Mis Juegos Favoritos</h1> : <div className=\"back-button-users\"><h1>Los Favoritos de {this.state.profileData.user.username}</h1></div>}\n                                    <Row className=\"justify-content-center\">\n                                {\n                                    this.state.profileData.user.favorites.length ?\n                                    this.state.profileData.user.favorites.map(fav =>\n                                        <Col md={3} key={fav._id} className=\"profile-game-details\">\n                                            <p>{fav.title}</p>\n                                            <img src={fav.gameImg} alt=\"gameImg\" className=\"profile-game-img\" />\n                                            {this.props.loggedInUser && this.props.loggedInUser._id === this.state.profileData.user._id && <Button onClick={() => this.deleteFavorite(fav._id)} className=\"btn edit-btn btn-sm btn-one\">Quitar de favoritos</Button>}\n                                        </Col>)\n                                        \n                                        :\n                                        this.props.loggedInUser &&\n                                        <p>No tienes juegos agregados a tu lista de favoritos. Ve a la sección <Link to=\"/games\" className=\"game-button\"> juegos</Link> y agrega algunos </p>\n                                }\n                                    </Row>\n                            </>\n                    }  \n                </Container>\n            </>\n        )\n}\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}