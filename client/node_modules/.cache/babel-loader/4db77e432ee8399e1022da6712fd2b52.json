{"ast":null,"code":"import _objectSpread from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./EventList.css';import EventService from'./../../../service/events.service';import EventCard from'../eventCard/EventCard';import EventForm from'../eventForm/EventForm';import SearchBar from'./../searchBar/SearchBar';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Button from'react-bootstrap/Button';import Toast from'react-bootstrap/Toast';import Modal from'react-bootstrap/Modal';import Col from'react-bootstrap/Col';var EventsList=/*#__PURE__*/function(_Component){_inherits(EventsList,_Component);var _super=_createSuper(EventsList);function EventsList(props){var _this;_classCallCheck(this,EventsList);_this=_super.call(this,props);_this.handleModal=function(visible){return _this.setState({modalShow:visible});};_this.handleToast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.filteredSearch=function(str){var filteredresults=_this.state.events.filter(function(event){return event.title.toLowerCase().includes(str.toLowerCase());});_this.setState({filteredEvents:filteredresults});};_this.getAllEvents=function(){_this.eventService.getEvents().then(function(response){return _this.setState({events:response.data,filteredEvents:response.data});});};_this.componentDidMount=function(){_this.getAllEvents();};_this.finishEventPost=function(){_this.getAllEvents();_this.handleModal(false);_this.handleToast(true,'El evento se ha creado con éxito');};_this.state={modalShow:false,toast:{show:false,text:''},events:[],filteredEvents:[]};_this.eventService=new EventService();return _this;}_createClass(EventsList,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Listado de Eventos\"),/*#__PURE__*/React.createElement(Col,{md:{span:4,offset:4}},this.props.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true);},block:true,style:{marginBottom:'20px'},className:\"btn-one\"},\"Crear nuevo evento\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchBar,{filteredSearch:this.filteredSearch}),!this.state.events.length&&/*#__PURE__*/React.createElement(\"p\",null,\"No se encontraron resultados\")),/*#__PURE__*/React.createElement(Row,{className:\"events-list\"},this.state.filteredEvents.map(function(elm){return/*#__PURE__*/React.createElement(EventCard,Object.assign({key:elm._id},elm));})),/*#__PURE__*/React.createElement(Modal,{show:this.state.modalShow,onHide:function onHide(){return _this2.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(EventForm,{loggedInUser:this.props.loggedInUser,finishEventPost:this.finishEventPost,closeModal:function closeModal(){return _this2.handleModal(false);}}))),/*#__PURE__*/React.createElement(Toast,{onClose:function onClose(){return _this2.handleToast(false);},show:this.state.toast.show,delay:4000,autohide:true},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}}]);return EventsList;}(Component);export default EventsList;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventList/EventList.js"],"names":["React","Component","EventService","EventCard","EventForm","SearchBar","Container","Row","Button","Toast","Modal","Col","EventsList","props","handleModal","visible","setState","modalShow","handleToast","text","toastCopy","state","toast","show","filteredSearch","str","filteredresults","events","filter","event","title","toLowerCase","includes","filteredEvents","getAllEvents","eventService","getEvents","then","response","data","componentDidMount","finishEventPost","span","offset","loggedInUser","marginBottom","length","map","elm","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport './EventList.css'\n\nimport EventService from './../../../service/events.service'\n\nimport EventCard from '../eventCard/EventCard'\nimport EventForm from '../eventForm/EventForm'\nimport SearchBar from './../searchBar/SearchBar'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\nimport Col from 'react-bootstrap/Col'\n\nclass EventsList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tmodalShow: false,\n\t\t\ttoast: {\n\t\t\t\tshow: false,\n\t\t\t\ttext: ''\n\t\t\t},\n\t\t\tevents: [],\n\t\t\tfilteredEvents: []\n\n\t\t}\n\t\tthis.eventService = new EventService()\n\t}\n\n\thandleModal = visible => this.setState({ modalShow: visible })\n\thandleToast = (visible, text = '') => {\n\t\tconst toastCopy = { ...this.state.toast }\n\t\ttoastCopy.show = visible\n\t\ttoastCopy.text = text\n\t\tthis.setState({ toast: toastCopy })\n    }\n    \n    filteredSearch = str => {\n\t\tconst filteredresults =  this.state.events.filter(event => event.title.toLowerCase().includes(str.toLowerCase()))\n        this.setState({ filteredEvents: filteredresults })\n\t}\n\n\tgetAllEvents = () => {\n\t\tthis.eventService.getEvents().then(response => this.setState({ events: response.data, filteredEvents: response.data }))\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.getAllEvents()\n\t}\n\n\tfinishEventPost = () => {\n\t\tthis.getAllEvents()\n\t\tthis.handleModal(false)\n\t\tthis.handleToast(true, 'El evento se ha creado con éxito')\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container as='section'>\n\t\t\t\t<h1>Listado de Eventos</h1>\n\t\t\t\t<Col md={{ span: 4, offset: 4 }}>\n\t\t\t\t\t{this.props.loggedInUser && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => this.handleModal(true)}\n\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\tstyle={{ marginBottom: '20px' }}\n\t\t\t\t\t\t\tclassName='btn-one'>\n\t\t\t\t\t\t\tCrear nuevo evento\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n                </Col>\n                <div>\n\t\t\t\t\t<SearchBar filteredSearch={this.filteredSearch} />\n\t\t\t\t\t{!this.state.events.length && <p>No se encontraron resultados</p>}\n\t\t\t\t</div>\n\n\t\t\t\t<Row className='events-list'>{this.state.filteredEvents.map(elm => <EventCard key={elm._id} {...elm} />)}</Row>\n\n\t\t\t\t<Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<EventForm\n\t\t\t\t\t\t\tloggedInUser={this.props.loggedInUser}\n\t\t\t\t\t\t\tfinishEventPost={this.finishEventPost}\n\t\t\t\t\t\t\tcloseModal={() => this.handleModal(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Toast onClose={() => this.handleToast(false)} show={this.state.toast.show} delay={4000} autohide>\n\t\t\t\t\t<Toast.Header>\n\t\t\t\t\t\t<strong className='mr-auto'>Mensaje</strong>\n\t\t\t\t\t</Toast.Header>\n\t\t\t\t\t<Toast.Body>{this.state.toast.text}</Toast.Body>\n\t\t\t\t</Toast>\n\t\t\t</Container>\n\t\t)\n\t}\n}\nexport default EventsList\n"]},"metadata":{},"sourceType":"module"}