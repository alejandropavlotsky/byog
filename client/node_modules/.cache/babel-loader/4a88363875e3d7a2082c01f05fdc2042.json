{"ast":null,"code":"import _objectSpread from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./GameList.css';import GameService from'./../../../service/game.service';import UserService from'./../../../service/user.service';import GameCard from'../gameCard/GameCard';import GameForm from'../game-form/GameForm';import SearchBar from'./../searchBar/SearchBar';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Button from'react-bootstrap/Button';import Toast from'react-bootstrap/Toast';import Modal from'react-bootstrap/Modal';import Col from'react-bootstrap/Col';var GameList=/*#__PURE__*/function(_Component){_inherits(GameList,_Component);var _super=_createSuper(GameList);function GameList(props){var _this;_classCallCheck(this,GameList);_this=_super.call(this,props);_this.addFavorite=function(favorite){if(!_this.state.favorites.some(function(alreadyFav){return alreadyFav===favorite;})){_this.userService.addFavorite(_this.props.loggedInUser._id,{newFavoriteId:favorite});}};_this.handleModal=function(visible){return _this.setState({modalShow:visible});};_this.handletoast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.filteredSearch=function(str){var gamesCopy=_this.state.gamesCopy;var filteredresults=gamesCopy.filter(function(game){return game.title.toLowerCase().includes(str.toLowerCase());});_this.setState({games:filteredresults});};_this.getAllGames=function(){_this.gameService.getGames().then(function(response){return _this.setState({games:response.data,gamesCopy:response.data});}).catch(function(err){return console.log(err);});};_this.componentDidMount=function(){_this.getAllGames();};_this.finishGamePost=function(){_this.getAllGames();_this.handleModal(false);_this.handletoast(true,'El juego se ha creado con éxito!');};_this.state={modalShow:false,toast:{show:false,text:''},games:[],favorites:[]};_this.gameService=new GameService();_this.userService=new UserService();return _this;}_createClass(GameList,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Listado de juegos\"),/*#__PURE__*/React.createElement(Col,{md:{span:4,offset:4}},this.props.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true);},block:true,style:{marginBottom:'20px'},className:\"btn-one\"},\"Crear nuevo juego\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchBar,{filteredSearch:this.filteredSearch}),!this.state.games.length&&/*#__PURE__*/React.createElement(\"p\",null,\"No se encontraron resultados\")),/*#__PURE__*/React.createElement(Row,{className:\"games-list\"},this.state.games.map(function(elm){return/*#__PURE__*/React.createElement(GameCard,Object.assign({key:elm._id},elm,{addFavorite:function addFavorite(){return _this2.addFavorite(elm._id);},loggedInUser:_this2.props.loggedInUser}));})),/*#__PURE__*/React.createElement(Modal,{show:this.state.modalShow,onHide:function onHide(){return _this2.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(GameForm,{loggedInUser:this.props.loggedInUser,finishGamePost:this.finishGamePost,closeModal:function closeModal(){return _this2.handleModal(false);}}))),/*#__PURE__*/React.createElement(Toast,{onClose:function onClose(){return _this2.handletoast(false);},show:this.state.toast.show,delay:4000,autohide:true},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}}]);return GameList;}(Component);export default GameList;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/gameList/GameList.js"],"names":["React","Component","GameService","UserService","GameCard","GameForm","SearchBar","Container","Row","Button","Toast","Modal","Col","GameList","props","addFavorite","favorite","state","favorites","some","alreadyFav","userService","loggedInUser","_id","newFavoriteId","handleModal","visible","setState","modalShow","handletoast","text","toastCopy","toast","show","filteredSearch","str","gamesCopy","filteredresults","filter","game","title","toLowerCase","includes","games","getAllGames","gameService","getGames","then","response","data","catch","err","console","log","componentDidMount","finishGamePost","span","offset","marginBottom","length","map","elm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport './GameList.css'\n\nimport GameService from './../../../service/game.service'\nimport UserService from './../../../service/user.service'\n\nimport GameCard from '../gameCard/GameCard'\nimport GameForm from '../game-form/GameForm'\nimport SearchBar from './../searchBar/SearchBar'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\nimport Col from 'react-bootstrap/Col'\n\nclass GameList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tmodalShow: false,\n\t\t\ttoast: {\n\t\t\t\tshow: false,\n\t\t\t\ttext: ''\n\t\t\t},\n\t\t\tgames: [],\n\t\t\tfavorites: []\n\t\t}\n\t\tthis.gameService = new GameService()\n\t\tthis.userService = new UserService()\n\t}\n\n\taddFavorite = favorite => {\n\t\tif (!this.state.favorites.some(alreadyFav => alreadyFav === favorite)) {\n\t\t\t\tthis.userService.addFavorite(this.props.loggedInUser._id, { newFavoriteId: favorite })\n\t\t}\n\t}\n\n\thandleModal = visible => this.setState({ modalShow: visible })\n\thandletoast = (visible, text = '') => {\n\t\tconst toastCopy = { ...this.state.toast }\n\t\ttoastCopy.show = visible\n\t\ttoastCopy.text = text\n\t\tthis.setState({ toast: toastCopy })\n\t}\n\n\n\n\tfilteredSearch = str => {\n\t\tconst { gamesCopy } = this.state\n\t\tconst filteredresults = gamesCopy.filter(game => game.title.toLowerCase().includes(str.toLowerCase()))\n\t\tthis.setState({ games: filteredresults })\n\t}\n\n\tgetAllGames = () => {\n\t\tthis.gameService\n\t\t\t.getGames()\n\t\t\t.then(response => this.setState({ games: response.data, gamesCopy: response.data }))\n\t\t\t.catch(err => console.log(err))\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.getAllGames()\n\t}\n\n\tfinishGamePost = () => {\n\t\tthis.getAllGames()\n\t\tthis.handleModal(false)\n\t\tthis.handletoast(true, 'El juego se ha creado con éxito!')\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container as='section'>\n\t\t\t\t<h1>Listado de juegos</h1>\n\t\t\t\t<Col md={{ span: 4, offset: 4 }}>\n\t\t\t\t\t{this.props.loggedInUser && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => this.handleModal(true)}\n\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\tstyle={{ marginBottom: '20px' }}\n\t\t\t\t\t\t\tclassName='btn-one'>\n\t\t\t\t\t\t\tCrear nuevo juego\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</Col>\n\t\t\t\t<div>\n\t\t\t\t\t<SearchBar filteredSearch={this.filteredSearch} />\n\t\t\t\t\t{!this.state.games.length && <p>No se encontraron resultados</p>}\n\t\t\t\t</div>\n\n\t\t\t\t<Row className='games-list'>{this.state.games.map(elm => <GameCard key={elm._id} {...elm} addFavorite={() => this.addFavorite(elm._id)} loggedInUser={this.props.loggedInUser}/>)}</Row>\n\n\t\t\t\t<Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<GameForm\n\t\t\t\t\t\t\tloggedInUser={this.props.loggedInUser}\n\t\t\t\t\t\t\tfinishGamePost={this.finishGamePost}\n\t\t\t\t\t\t\tcloseModal={() => this.handleModal(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Toast\n\t\t\t\t\tonClose={() => this.handletoast(false)}\n\t\t\t\t\tshow={this.state.toast.show}\n\t\t\t\t\tdelay={4000}\n\t\t\t\t\tautohide>\n\t\t\t\t\t<Toast.Header>\n\t\t\t\t\t\t<strong className='mr-auto'>Mensaje</strong>\n\t\t\t\t\t</Toast.Header>\n\t\t\t\t\t<Toast.Body>{this.state.toast.text}</Toast.Body>\n\t\t\t\t</Toast>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default GameList\n"]},"metadata":{},"sourceType":"module"}