{"ast":null,"code":"import _toConsumableArray from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import EventService from'../../../service/events.service';import moment from'moment';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Button from'react-bootstrap/Button';import Spinner from'react-bootstrap/Spinner';import GoogleMapReact from'google-map-react';import axios from'axios';import'./EventDetails.css';import{Link}from'react-router-dom';var EventDetails=/*#__PURE__*/function(_Component){_inherits(EventDetails,_Component);var _super=_createSuper(EventDetails);function EventDetails(props){var _this;_classCallCheck(this,EventDetails);_this=_super.call(this,props);_this.handleEventSign=function(e){_this.state.event.assistance.push(_this.props.loggedInUser.username);_this.setState({assitance:_toConsumableArray(_this.state.event.assistance)});};_this.componentDidMount=function(){_this.getEventInfo();};_this.state={event:null,assistance:[],center:{lat:props.lat,lng:props.lng},loggedInUser:_this.props.loggedInUser};_this.eventService=new EventService();return _this;}_createClass(EventDetails,[{key:\"getEventInfo\",value:function getEventInfo(){var _this2=this;var id=this.props.match.params.eventId;console.log(this.props);this.eventService.getEvent(id).then(function(response){return _this2.setState({event:response.data},function(){return _this2.getGoogleMap();});}).catch(function(err){return console.log(err);});}},{key:\"getGoogleMap\",value:function getGoogleMap(){var _this3=this;var location=this.state.event.location;var key=\"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\";axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(location,\"&key=\").concat(key)).then(function(geores){var latitude=geores.data.results[0].geometry.location.lat;var longitude=geores.data.results[0].geometry.location.lng;_this3.setState({center:{lat:latitude,lng:longitude}});});}},{key:\"render\",value:function render(){if(this.state.event){var _this$state$event=this.state.event,author=_this$state$event.author,title=_this$state$event.title,description=_this$state$event.description,location=_this$state$event.location,attendance=_this$state$event.attendance,assistance=_this$state$event.assistance,gameDate=_this$state$event.gameDate,reviews=_this$state$event.reviews;return/*#__PURE__*/React.createElement(Container,{as:\"section\",className:\"event-details\"},/*#__PURE__*/React.createElement(\"h1\",null,title),/*#__PURE__*/React.createElement(Row,{as:\"article\"},/*#__PURE__*/React.createElement(Col,{md:{span:5,offset:1}},/*#__PURE__*/React.createElement(\"div\",{id:\"map\"},/*#__PURE__*/React.createElement(GoogleMapReact,{bootstrapURLKeys:{key:\"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\"},center:this.state.center,defaultZoom:this.props.zoom},/*#__PURE__*/React.createElement(\"div\",{style:{backgroundImage:\"url('../../../../img/marker.png')\",width:\"26px\",height:\"29px\"},lat:this.state.center.lat,lng:this.state.center.lng}))),/*#__PURE__*/React.createElement(Link,{to:\"/events\",className:\"btn btn-success\"},\"Volver\"),this.state.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:this.handleEventSign,className:\"btn btn-success\"},\"Apuntarme\")),/*#__PURE__*/React.createElement(Col,{md:{span:5}},/*#__PURE__*/React.createElement(\"h4\",null,\"Detalles\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Autor: \"),\" \",author.username,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Descripcion: \"),\" \",description,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Direccion: \"),\" \",location,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Participantes:  \"),\" \",attendance,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Asistentes: \"),\" \",assistance,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Fecha: \"),\" \",moment(gameDate).format(\"DD/MM/YYYY h:mmA\"),\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Rese\\xF1as: \"),\" \",reviews,\" \"))));}else{return/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"));}}}]);return EventDetails;}(Component);EventDetails.defaultProps={center:{lat:40.420524,lng:-3.705128},zoom:16};export default EventDetails;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventDetails/EventDetails.js"],"names":["React","Component","EventService","moment","Container","Row","Col","Button","Spinner","GoogleMapReact","axios","Link","EventDetails","props","handleEventSign","e","state","event","assistance","push","loggedInUser","username","setState","assitance","componentDidMount","getEventInfo","center","lat","lng","eventService","id","match","params","eventId","console","log","getEvent","then","response","data","getGoogleMap","catch","err","location","key","get","geores","latitude","results","geometry","longitude","author","title","description","attendance","gameDate","reviews","span","offset","zoom","backgroundImage","width","height","format","defaultProps"],"mappings":"8/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,oBAAP,CAEA,OAASC,IAAT,KAAqB,kBAArB,C,GAEMC,CAAAA,Y,4GAEF,sBAAYC,KAAZ,CAAmB,8CACf,uBAAMA,KAAN,EADe,MAsBnBC,eAtBmB,CAsBD,SAAAC,CAAC,CAAI,CACnB,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,CAA4BC,IAA5B,CAAiC,MAAKN,KAAL,CAAWO,YAAX,CAAwBC,QAAzD,EAEA,MAAKC,QAAL,CAAc,CACVC,SAAS,oBAAM,MAAKP,KAAL,CAAWC,KAAX,CAAiBC,UAAvB,CADC,CAAd,EAGH,CA5BkB,OA2DnBM,iBA3DmB,CA2DC,UAAM,CACtB,MAAKC,YAAL,GACH,CA7DkB,CAEf,MAAKT,KAAL,CAAa,CACTC,KAAK,CAAE,IADE,CAETC,UAAU,CAAE,EAFH,CAGTQ,MAAM,CAAE,CACJC,GAAG,CAAEd,KAAK,CAACc,GADP,CAEJC,GAAG,CAAEf,KAAK,CAACe,GAFP,CAHC,CAOTR,YAAY,CAAE,MAAKP,KAAL,CAAWO,YAPhB,CAAb,CASA,MAAKS,YAAL,CAAoB,GAAI3B,CAAAA,YAAJ,EAApB,CAXe,aAYlB,C,4EAkBc,iBACX,GAAM4B,CAAAA,EAAE,CAAG,KAAKjB,KAAL,CAAWkB,KAAX,CAAiBC,MAAjB,CAAwBC,OAAnC,CACAC,OAAO,CAACC,GAAR,CAAY,KAAKtB,KAAjB,EACA,KAAKgB,YAAL,CAAkBO,QAAlB,CAA2BN,EAA3B,EACKO,IADL,CACU,SAAAC,QAAQ,QAAI,CAAA,MAAI,CAAChB,QAAL,CAAc,CAAEL,KAAK,CAAEqB,QAAQ,CAACC,IAAlB,CAAd,CAAwC,iBAAM,CAAA,MAAI,CAACC,YAAL,EAAN,EAAxC,CAAJ,EADlB,EAEKC,KAFL,CAEW,SAAAC,GAAG,QAAIR,CAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ,CAAJ,EAFd,EAGH,C,mDAMc,iBACX,GAAIC,CAAAA,QAAQ,CAAG,KAAK3B,KAAL,CAAWC,KAAX,CAAiB0B,QAAhC,CACA,GAAIC,CAAAA,GAAG,CAAG,yCAAV,CACAlC,KAAK,CAACmC,GAAN,qEACiEF,QADjE,iBACiFC,GADjF,GAEKP,IAFL,CAEU,SAACS,MAAD,CAAY,CACd,GAAIC,CAAAA,QAAQ,CAAGD,MAAM,CAACP,IAAP,CAAYS,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCN,QAAhC,CAAyChB,GAAxD,CACA,GAAIuB,CAAAA,SAAS,CAAGJ,MAAM,CAACP,IAAP,CAAYS,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCN,QAAhC,CAAyCf,GAAzD,CACA,MAAI,CAACN,QAAL,CAAc,CACVI,MAAM,CAAE,CACJC,GAAG,CAAEoB,QADD,CAEJnB,GAAG,CAAEsB,SAFD,CADE,CAAd,EAMH,CAXL,EAYH,C,uCAMQ,CACL,GAAI,KAAKlC,KAAL,CAAWC,KAAf,CAAsB,uBACwE,KAAKD,KAAL,CAAWC,KADnF,CACXkC,MADW,mBACXA,MADW,CACHC,KADG,mBACHA,KADG,CACIC,WADJ,mBACIA,WADJ,CACiBV,QADjB,mBACiBA,QADjB,CAC2BW,UAD3B,mBAC2BA,UAD3B,CACuCpC,UADvC,mBACuCA,UADvC,CACmDqC,QADnD,mBACmDA,QADnD,CAC6DC,OAD7D,mBAC6DA,OAD7D,CAElB,mBACI,oBAAC,SAAD,EAAW,EAAE,CAAC,SAAd,CAAwB,SAAS,CAAC,eAAlC,eACI,8BAAKJ,KAAL,CADJ,cAGI,oBAAC,GAAD,EAAK,EAAE,CAAC,SAAR,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAEK,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,eACI,2BAAK,EAAE,CAAC,KAAR,eACI,oBAAC,cAAD,EACI,gBAAgB,CAAE,CAAEd,GAAG,CAAE,yCAAP,CADtB,CAEI,MAAM,CAAE,KAAK5B,KAAL,CAAWU,MAFvB,CAGI,WAAW,CAAE,KAAKb,KAAL,CAAW8C,IAH5B,eAII,2BAAK,KAAK,CAAE,CAAEC,eAAe,CAAE,mCAAnB,CAAwDC,KAAK,CAAE,MAA/D,CAAuEC,MAAM,CAAE,MAA/E,CAAZ,CACI,GAAG,CAAE,KAAK9C,KAAL,CAAWU,MAAX,CAAkBC,GAD3B,CAEI,GAAG,CAAE,KAAKX,KAAL,CAAWU,MAAX,CAAkBE,GAF3B,EAJJ,CADJ,CADJ,cAYI,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,iBAA7B,WAZJ,CAcQ,KAAKZ,KAAL,CAAWI,YAAX,eACA,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKN,eAAtB,CAAuC,SAAS,CAAC,iBAAjD,cAfR,CADJ,cAmBI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAE2C,IAAI,CAAE,CAAR,CAAT,eACI,yCADJ,cAEI,8BAFJ,cAGI,8CAAI,4CAAJ,KAA8BN,MAAM,CAAC9B,QAArC,KAHJ,cAII,8BAJJ,cAKI,8CAAI,kDAAJ,KAAoCgC,WAApC,KALJ,cAMI,8BANJ,cAOI,8CAAI,gDAAJ,KAAkCV,QAAlC,KAPJ,cAQI,8BARJ,cASI,8CAAI,qDAAJ,KAAuCW,UAAvC,KATJ,cAUI,8BAVJ,cAWI,8CAAI,iDAAJ,KAAmCpC,UAAnC,KAXJ,cAYI,8BAZJ,cAaI,8CAAI,4CAAJ,KAA8Bf,MAAM,CAACoD,QAAD,CAAN,CAAiBQ,MAAjB,CAAwB,kBAAxB,CAA9B,KAbJ,cAcI,8BAdJ,cAeI,8CAAI,iDAAJ,KAAgCP,OAAhC,KAfJ,CAnBJ,CAHJ,CADJ,CA2CH,CA7CD,IA6CO,CACH,mBAAO,oBAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,IAAI,CAAC,QAAjC,eACE,4BAAM,SAAS,CAAC,SAAhB,eADF,CAAP,CAGH,CACJ,C,0BApHsBvD,S,EAArBW,Y,CAgBKoD,Y,CAAe,CAClBtC,MAAM,CAAE,CACJC,GAAG,CAAE,SADD,CAEJC,GAAG,CAAE,CAAC,QAFF,CADU,CAKlB+B,IAAI,CAAE,EALY,C,CAsG1B,cAAe/C,CAAAA,YAAf","sourcesContent":["import React, { Component } from 'react'\nimport EventService from '../../../service/events.service'\nimport moment from 'moment'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Button from 'react-bootstrap/Button'\nimport Spinner from 'react-bootstrap/Spinner'\nimport GoogleMapReact from 'google-map-react'\nimport axios from 'axios'\n\nimport './EventDetails.css'\n\nimport { Link } from 'react-router-dom'\n\nclass EventDetails extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            event: null,\n            assistance: [],\n            center: {\n                lat: props.lat,\n                lng: props.lng\n            },\n            loggedInUser: this.props.loggedInUser\n        }\n        this.eventService = new EventService()\n    }\n\n    static defaultProps = {\n        center: {\n            lat: 40.420524,\n            lng: -3.705128\n        },\n        zoom: 16,\n    }\n\n    handleEventSign = e => {\n        this.state.event.assistance.push(this.props.loggedInUser.username)\n\n        this.setState({\n            assitance: [...this.state.event.assistance]\n        })\n    }\n\n    getEventInfo() {\n        const id = this.props.match.params.eventId\n        console.log(this.props)\n        this.eventService.getEvent(id)\n            .then(response => this.setState({ event: response.data }, () => this.getGoogleMap()))\n            .catch(err => console.log(err))\n    }\n\n\n   \n\n\n    getGoogleMap() {\n        let location = this.state.event.location\n        let key = \"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\"\n        axios.get(\n            `https://maps.googleapis.com/maps/api/geocode/json?address=${location}&key=${key}`)\n            .then((geores) => {\n                let latitude = geores.data.results[0].geometry.location.lat\n                let longitude = geores.data.results[0].geometry.location.lng\n                this.setState({\n                    center: {\n                        lat: latitude,\n                        lng: longitude\n                    }\n                })\n            })\n    }\n\n    componentDidMount = () => { \n        this.getEventInfo()\n    }\n\n    render() {\n        if (this.state.event) {\n            const {author, title, description, location, attendance, assistance, gameDate, reviews} = this.state.event\n            return (\n                <Container as=\"section\" className=\"event-details\">\n                    <h1>{title}</h1>\n    \n                    <Row as=\"article\">\n                        <Col md={{ span: 5, offset: 1 }}>\n                            <div id=\"map\">\n                                <GoogleMapReact\n                                    bootstrapURLKeys={{ key: \"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\" }}\n                                    center={this.state.center}\n                                    defaultZoom={this.props.zoom}>\n                                    <div style={{ backgroundImage: \"url('../../../../img/marker.png')\", width: \"26px\", height: \"29px\" }}\n                                        lat={this.state.center.lat}\n                                        lng={this.state.center.lng}>\n                                    </div>\n                                </GoogleMapReact>\n                            </div>\n                            <Link to=\"/events\" className=\"btn btn-success\">Volver</Link>\n                            {\n                                this.state.loggedInUser &&\n                                <Button onClick={this.handleEventSign} className=\"btn btn-success\">Apuntarme</Button>   \n                            }\n                        </Col>\n                        <Col md={{ span: 5 }}>\n                            <h4>Detalles</h4>\n                            <hr />\n                            <p> <strong>Autor: </strong> {author.username} </p>\n                            <hr />\n                            <p> <strong>Descripcion: </strong> {description} </p>\n                            <hr />\n                            <p> <strong>Direccion: </strong> {location} </p>\n                            <hr />\n                            <p> <strong>Participantes:  </strong> {attendance} </p>\n                            <hr />\n                            <p> <strong>Asistentes: </strong> {assistance} </p>\n                            <hr/>\n                            <p> <strong>Fecha: </strong> {moment(gameDate).format(\"DD/MM/YYYY h:mmA\")} </p>\n                            <hr />\n                            <p> <strong>Rese√±as: </strong> {reviews} </p>\n                        </Col>\n                    </Row>\n                </Container>\n            )\n        } else {\n            return <Spinner animation=\"border\" role=\"status\">\n                     <span className=\"sr-only\">Loading...</span>\n                    </Spinner>\n        }\n    }\n}\nexport default EventDetails"]},"metadata":{},"sourceType":"module"}