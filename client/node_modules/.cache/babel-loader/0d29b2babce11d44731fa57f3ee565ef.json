{"ast":null,"code":"var _jsxFileName = \"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventList/EventList.js\";\nimport React, { Component } from 'react';\nimport EventService from './../../../service/events.service';\nimport './EventList.css';\nimport EventCard from '../eventCard/EventCard';\nimport EventForm from '../eventForm/EventForm';\nimport SearchBar from './../searchBar/SearchBar';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport Toast from 'react-bootstrap/Toast';\nimport Modal from 'react-bootstrap/Modal';\nimport Col from 'react-bootstrap/Col';\n\nclass EventsList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleModal = visible => this.setState({\n      modalShow: visible\n    });\n\n    this.handleToast = (visible, text = '') => {\n      const toastCopy = { ...this.state.toast\n      };\n      toastCopy.show = visible;\n      toastCopy.text = text;\n      this.setState({\n        toast: toastCopy\n      });\n    };\n\n    this.filteredSearch = str => {\n      const eventCopy = [...this.state.events];\n      console.log(eventCopy);\n      const filteredresults = eventCopy.filter(event => event.title.toLowerCase().includes(str.toLowerCase()));\n      this.setState({\n        events: filteredresults\n      });\n    };\n\n    this.getAllEvents = () => {\n      this.eventService.getEvents().then(response => this.setState({\n        events: response.data\n      }));\n    };\n\n    this.componentDidMount = () => {\n      this.getAllEvents();\n    };\n\n    this.finishEventPost = () => {\n      this.getAllEvents();\n      this.handleModal(false);\n      this.handleToast(true, 'El evento se ha creado con éxito');\n    };\n\n    this.state = {\n      modalShow: false,\n      toast: {\n        show: false,\n        text: ''\n      },\n      events: []\n    };\n    this.eventService = new EventService();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }\n    }, \"Listado de Eventos\"), /*#__PURE__*/React.createElement(Col, {\n      md: {\n        span: 4,\n        offset: 4\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }\n    }, this.props.loggedInUser && /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.handleModal(true),\n      variant: \"success\",\n      block: true,\n      style: {\n        marginBottom: '20px'\n      },\n      className: \"btn-one\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, \"Crear nuevo evento\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, {\n      filteredSearch: this.filteredSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 6\n      }\n    }), !this.state.events.length && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 36\n      }\n    }, \"No se encontraron resultados\")), /*#__PURE__*/React.createElement(Row, {\n      className: \"events-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }\n    }, this.state.events.map(elm => /*#__PURE__*/React.createElement(EventCard, Object.assign({\n      key: elm._id\n    }, elm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 64\n      }\n    })))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.modalShow,\n      onHide: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(EventForm, {\n      loggedInUser: this.props.loggedInUser,\n      finishEventPost: this.finishEventPost,\n      closeModal: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(Toast, {\n      onClose: () => this.handleToast(false),\n      show: this.state.toast.show,\n      delay: 4000,\n      autohide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, \"Mensaje\")), /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 6\n      }\n    }, this.state.toast.text)));\n  }\n\n}\n\nexport default EventsList;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventList/EventList.js"],"names":["React","Component","EventService","EventCard","EventForm","SearchBar","Container","Row","Button","Toast","Modal","Col","EventsList","constructor","props","handleModal","visible","setState","modalShow","handleToast","text","toastCopy","state","toast","show","filteredSearch","str","eventCopy","events","console","log","filteredresults","filter","event","title","toLowerCase","includes","getAllEvents","eventService","getEvents","then","response","data","componentDidMount","finishEventPost","render","span","offset","loggedInUser","marginBottom","length","map","elm","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EventService from './../../../service/events.service'\n\nimport './EventList.css'\n\nimport EventCard from '../eventCard/EventCard'\nimport EventForm from '../eventForm/EventForm'\nimport SearchBar from './../searchBar/SearchBar'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\nimport Col from 'react-bootstrap/Col'\n\nclass EventsList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tmodalShow: false,\n\t\t\ttoast: {\n\t\t\t\tshow: false,\n\t\t\t\ttext: ''\n\t\t\t},\n\t\t\tevents: []\n\t\t}\n\t\tthis.eventService = new EventService()\n\t}\n\n\thandleModal = visible => this.setState({ modalShow: visible })\n\thandleToast = (visible, text = '') => {\n\t\tconst toastCopy = { ...this.state.toast }\n\t\ttoastCopy.show = visible\n\t\ttoastCopy.text = text\n\t\tthis.setState({ toast: toastCopy })\n    }\n    \n    filteredSearch = str => {\n        const eventCopy =  [...this.state.events]\n        console.log(eventCopy)\n\t\tconst filteredresults = eventCopy.filter(event => event.title.toLowerCase().includes(str.toLowerCase()))\n        this.setState({ events: filteredresults })\n\t}\n\n\tgetAllEvents = () => {\n\t\tthis.eventService.getEvents().then(response => this.setState({ events: response.data }))\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.getAllEvents()\n\t}\n\n\tfinishEventPost = () => {\n\t\tthis.getAllEvents()\n\t\tthis.handleModal(false)\n\t\tthis.handleToast(true, 'El evento se ha creado con éxito')\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container as='section'>\n\t\t\t\t<h1>Listado de Eventos</h1>\n\t\t\t\t<Col md={{ span: 4, offset: 4 }}>\n\t\t\t\t\t{this.props.loggedInUser && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => this.handleModal(true)}\n\t\t\t\t\t\t\tvariant='success'\n\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\tstyle={{ marginBottom: '20px' }}\n\t\t\t\t\t\t\tclassName='btn-one'>\n\t\t\t\t\t\t\tCrear nuevo evento\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n                </Col>\n                <Col>\n\t\t\t\t\t<SearchBar filteredSearch={this.filteredSearch} />\n\t\t\t\t\t{!this.state.events.length && <p className=''>No se encontraron resultados</p>}\n\t\t\t\t</Col>\n\n\t\t\t\t<Row className='events-list'>{this.state.events.map(elm => <EventCard key={elm._id} {...elm} />)}</Row>\n\n\t\t\t\t<Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<EventForm\n\t\t\t\t\t\t\tloggedInUser={this.props.loggedInUser}\n\t\t\t\t\t\t\tfinishEventPost={this.finishEventPost}\n\t\t\t\t\t\t\tcloseModal={() => this.handleModal(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Toast onClose={() => this.handleToast(false)} show={this.state.toast.show} delay={4000} autohide>\n\t\t\t\t\t<Toast.Header>\n\t\t\t\t\t\t<strong className='mr-auto'>Mensaje</strong>\n\t\t\t\t\t</Toast.Header>\n\t\t\t\t\t<Toast.Body>{this.state.toast.text}</Toast.Body>\n\t\t\t\t</Toast>\n\t\t\t</Container>\n\t\t)\n\t}\n}\nexport default EventsList\n"]},"metadata":{},"sourceType":"module"}