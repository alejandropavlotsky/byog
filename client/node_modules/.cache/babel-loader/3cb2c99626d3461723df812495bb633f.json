{"ast":null,"code":"import _objectSpread from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import EventService from'./../../../service/events.service';import'./EventList.css';import EventCard from'../eventCard/EventCard';import EventForm from'../eventForm/EventForm';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Button from'react-bootstrap/Button';import Toast from'react-bootstrap/Toast';import Modal from'react-bootstrap/Modal';import Col from'react-bootstrap/Col';var EventsList=/*#__PURE__*/function(_Component){_inherits(EventsList,_Component);var _super=_createSuper(EventsList);function EventsList(props){var _this;_classCallCheck(this,EventsList);_this=_super.call(this,props);_this.handleModal=function(visible){return _this.setState({modalShow:visible});};_this.handleToast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.getAllEvents=function(){_this.eventService.getEvents().then(function(response){return _this.setState({events:response.data});});};_this.componentDidMount=function(){_this.getAllEvents();};_this.finishEventPost=function(){_this.getAllEvents();_this.handleModal(false);_this.handleToast(true,'El evento se ha creado con éxito');};_this.state={modalShow:false,toast:{show:false,text:''},events:[]};_this.eventService=new EventService();return _this;}_createClass(EventsList,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Listado de Eventos\"),/*#__PURE__*/React.createElement(Col,{md:{span:4,offset:4}},this.props.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true);},variant:\"success\",block:true,style:{marginBottom:'20px'},className:\"btn-one\"},\"Crear nuevo evento\")),/*#__PURE__*/React.createElement(Row,{className:\"events-list\"},this.state.events.map(function(elm){return/*#__PURE__*/React.createElement(EventCard,Object.assign({key:elm._id},elm));})),/*#__PURE__*/React.createElement(Modal,{show:this.state.modalShow,onHide:function onHide(){return _this2.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(EventForm,{loggedInUser:this.props.loggedInUser,finishEventPost:this.finishEventPost,closeModal:function closeModal(){return _this2.handleModal(false);}}))),/*#__PURE__*/React.createElement(Toast,{onClose:function onClose(){return _this2.handleToast(false);},show:this.state.toast.show,delay:4000,autohide:true},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}}]);return EventsList;}(Component);export default EventsList;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventList/EventList.js"],"names":["React","Component","EventService","EventCard","EventForm","Container","Row","Button","Toast","Modal","Col","EventsList","props","handleModal","visible","setState","modalShow","handleToast","text","toastCopy","state","toast","show","getAllEvents","eventService","getEvents","then","response","events","data","componentDidMount","finishEventPost","span","offset","loggedInUser","marginBottom","map","elm","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EventService from './../../../service/events.service'\n\nimport './EventList.css'\n\nimport EventCard from '../eventCard/EventCard'\nimport EventForm from '../eventForm/EventForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\nimport Col from 'react-bootstrap/Col'\n\nclass EventsList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            modalShow: false,\n            toast: {\n                show: false,\n                text: ''\n            },\n            events: []\n        }\n        this.eventService = new EventService()\n    }\n\n\n    handleModal = visible => this.setState({ modalShow: visible })\n    handleToast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({ toast: toastCopy })\n    }\n\n    getAllEvents = () => {\n        this.eventService.getEvents()\n            .then(response => this.setState({events: response.data}))\n    }\n\n    componentDidMount = () => {\n        this.getAllEvents()\n    }\n\n    finishEventPost = () => {\n        this.getAllEvents()\n        this.handleModal(false)\n        this.handleToast(true, 'El evento se ha creado con éxito')\n    }\n\n    render() {\n        return (\n            <Container as=\"section\">\n                <h1>Listado de Eventos</h1>\n                <Col md={{ span: 4, offset: 4 }}>\n                    {this.props.loggedInUser && <Button onClick={() => this.handleModal(true)} variant=\"success\" block style={{ marginBottom: '20px' }} className=\"btn-one\">Crear nuevo evento</Button>}\n                </Col>\n\n                <Row className=\"events-list\">\n                    {this.state.events.map(elm => <EventCard key={elm._id} {...elm}/>)}\n                </Row>\n\n                <Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                    <Modal.Body>\n                        <EventForm loggedInUser={this.props.loggedInUser} finishEventPost={this.finishEventPost} closeModal={() => this.handleModal(false)} />\n                    </Modal.Body>\n                </Modal>\n\n                <Toast onClose={() => this.handleToast(false)} show={this.state.toast.show} delay={4000} autohide>\n                    <Toast.Header><strong className=\"mr-auto\">Mensaje</strong></Toast.Header>\n                    <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n            </Container>\n        )\n    }\n}\nexport default EventsList"]},"metadata":{},"sourceType":"module"}