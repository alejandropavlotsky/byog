{"ast":null,"code":"import _toConsumableArray from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import EventService from'../../../service/events.service';import moment from'moment';import axios from'axios';import{Link}from'react-router-dom';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import Spinner from'react-bootstrap/Spinner';import Toast from'react-bootstrap/Toast';import GoogleMapReact from'google-map-react';import ReviewForm from'./../reviewForm/ReviewForm';import'./EventDetails.css';var EventDetails=/*#__PURE__*/function(_Component){_inherits(EventDetails,_Component);var _super=_createSuper(EventDetails);function EventDetails(props){var _this;_classCallCheck(this,EventDetails);_this=_super.call(this,props);_this.handleModal=function(visible){return _this.setState({modalShow:visible});};_this.handleToast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.handleEventSign=function(e){var assistanceCopy=_toConsumableArray(_this.state.event.assistance);assistanceCopy.push(_this.props.loggedInUser._id);_this.eventService.editEvent(_objectSpread(_objectSpread({},_this.state.event),{},{assistance:assistanceCopy})).then(console.log);};_this.componentDidMount=function(){_this.getEventInfo();};_this.finishEventPost=function(){_this.getAllEvents();_this.handleModal(false);_this.handleToast(true,'El comentario se ha creado con éxito!');};_this.state={event:null,center:{lat:props.lat,lng:props.lng},loggedInUser:_this.props.loggedInUser,modalShow:false,toast:{show:false,text:''}};_this.eventService=new EventService();return _this;}_createClass(EventDetails,[{key:\"getEventInfo\",value:function getEventInfo(){var _this2=this;var id=this.props.match.params.eventId;this.eventService.getEvent(id).then(function(response){return _this2.setState({event:response.data},function(){return _this2.getGoogleMap();});}).catch(function(err){return console.log(err);});}},{key:\"getGoogleMap\",value:function getGoogleMap(){var _this3=this;var location=this.state.event.location;var key=\"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\";axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(location,\"&key=\").concat(key)).then(function(geores){var latitude=geores.data.results[0].geometry.location.lat;var longitude=geores.data.results[0].geometry.location.lng;_this3.setState({center:{lat:latitude,lng:longitude}});});}},{key:\"render\",value:function render(){var _this4=this;if(this.state.event){var _this$state$event=this.state.event,author=_this$state$event.author,title=_this$state$event.title,description=_this$state$event.description,location=_this$state$event.location,attendance=_this$state$event.attendance,gameDate=_this$state$event.gameDate,reviews=_this$state$event.reviews;return/*#__PURE__*/React.createElement(Container,{as:\"section\",className:\"event-details\"},/*#__PURE__*/React.createElement(\"h1\",null,title),/*#__PURE__*/React.createElement(Row,{as:\"article\"},/*#__PURE__*/React.createElement(Col,{md:{span:5,offset:1},className:\"map-button-event-details\"},/*#__PURE__*/React.createElement(\"div\",{id:\"map\"},/*#__PURE__*/React.createElement(GoogleMapReact,{bootstrapURLKeys:{key:\"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\"},center:this.state.center,defaultZoom:this.props.zoom},/*#__PURE__*/React.createElement(\"div\",{style:{backgroundImage:\"url('../../../../img/marker.png')\",width:\"26px\",height:\"29px\"},lat:this.state.center.lat,lng:this.state.center.lng}))),/*#__PURE__*/React.createElement(\"div\",{className:\"event-details-buttons\"},/*#__PURE__*/React.createElement(Link,{to:\"/events\",className:\"btn btn-success btn-one\"},\"Volver\"),this.state.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:this.handleEventSign,className:\"btn btn-success btn-one\"},\"Apuntarme\"))),/*#__PURE__*/React.createElement(Col,{md:{span:5}},/*#__PURE__*/React.createElement(\"h4\",null,\"Detalles\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Autor: \"),\" \",author.username,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Descripci\\xF3n: \"),\" \",description,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Direcci\\xF3n: \"),\" \",location,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Participantes:  \"),\" \",attendance,\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Asistentes: \"),\" \",!this.state.event&&!this.state.event.assistance?\"No hay nadie apuntado, todav�a\":this.state.event.assistance.map(function(user){return user.username;}).join(', '),\" \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Fecha: \"),\" \",moment(gameDate).format(\"DD/MM/YYYY h:mmA\"),\" \"),/*#__PURE__*/React.createElement(\"hr\",null),this.props.loggedInUser&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this4.handleModal(true);},variant:\"success\",block:true,style:{marginBottom:'20px'},className:\"btn-one\"},\"Dejar Rese\\xF1a\"),/*#__PURE__*/React.createElement(\"p\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"Rese\\xF1as: \"),\" \",reviews,\" \"))),/*#__PURE__*/React.createElement(Modal,{show:this.state.modalShow,onHide:function onHide(){return _this4.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(ReviewForm,{loggedInUser:this.props.loggedInUser,eventId:this.state.event._id,finishEventPost:this.finishEventPost,closeModal:function closeModal(){return _this4.handleModal(false);}}))),/*#__PURE__*/React.createElement(Toast,{variant:\"success\",onClose:function onClose(){return _this4.handletoast(false);},show:this.state.toast.show,delay:4000,autohide:true},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}else{return/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"));}}}]);return EventDetails;}(Component);EventDetails.defaultProps={center:{lat:40.420524,lng:-3.705128},zoom:16};export default EventDetails;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/eventDetails/EventDetails.js"],"names":["React","Component","EventService","moment","axios","Link","Container","Row","Col","Modal","Button","Spinner","Toast","GoogleMapReact","ReviewForm","EventDetails","props","handleModal","visible","setState","modalShow","handleToast","text","toastCopy","state","toast","show","handleEventSign","e","assistanceCopy","event","assistance","push","loggedInUser","_id","eventService","editEvent","then","console","log","componentDidMount","getEventInfo","finishEventPost","getAllEvents","center","lat","lng","id","match","params","eventId","getEvent","response","data","getGoogleMap","catch","err","location","key","get","geores","latitude","results","geometry","longitude","author","title","description","attendance","gameDate","reviews","span","offset","zoom","backgroundImage","width","height","username","map","user","join","format","marginBottom","handletoast","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EventService from '../../../service/events.service'\nimport moment from 'moment'\nimport axios from 'axios'\n\nimport { Link } from 'react-router-dom'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport Spinner from 'react-bootstrap/Spinner'\nimport Toast from 'react-bootstrap/Toast'\nimport GoogleMapReact from 'google-map-react'\n\nimport ReviewForm from './../reviewForm/ReviewForm'\nimport './EventDetails.css'\n\n\n\nclass EventDetails extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            event: null,\n            center: {\n                lat: props.lat,\n                lng: props.lng\n            },\n            loggedInUser: this.props.loggedInUser,\n            modalShow: false,\n            toast: {\n                show: false,\n                text: ''\n            }\n        }\n        this.eventService = new EventService()\n    }\n\n    static defaultProps = {\n        center: {\n            lat: 40.420524,\n            lng: -3.705128\n        },\n        zoom: 16,\n    }\n\n    handleModal = visible => this.setState({ modalShow: visible })\n    handleToast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({toast: toastCopy})\n    }\n\n    handleEventSign = e => {\n        const assistanceCopy = [...this.state.event.assistance]\n        assistanceCopy.push(this.props.loggedInUser._id)\n            this.eventService.editEvent({ ...this.state.event, assistance: assistanceCopy })\n                .then(console.log)\n    }\n\n    getEventInfo() {\n        const id = this.props.match.params.eventId\n        this.eventService.getEvent(id)\n            .then(response => this.setState({ event: response.data }, () => this.getGoogleMap()))\n            .catch(err => console.log(err))\n    }\n\n    getGoogleMap() {\n        let location = this.state.event.location\n        let key = \"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\"\n        axios.get(\n            `https://maps.googleapis.com/maps/api/geocode/json?address=${location}&key=${key}`)\n            .then((geores) => {\n                let latitude = geores.data.results[0].geometry.location.lat\n                let longitude = geores.data.results[0].geometry.location.lng\n                this.setState({\n                    center: {\n                        lat: latitude,\n                        lng: longitude\n                    }\n                })\n            })\n    }\n\n    componentDidMount = () => { \n        this.getEventInfo()\n    }\n\n    finishEventPost = () => {\n        this.getAllEvents()\n        this.handleModal(false)\n        this.handleToast(true, 'El comentario se ha creado con éxito!')\n    }\n\n    \n    render() {\n        \n        if (this.state.event) {\n            const { author, title, description, location, attendance,  gameDate, reviews } = this.state.event\n            return (\n                <Container as=\"section\" className=\"event-details\">\n                    <h1>{title}</h1>\n    \n                    <Row as=\"article\">\n                        <Col md={{ span: 5, offset: 1 }} className=\"map-button-event-details\">\n                            <div id=\"map\">\n                                <GoogleMapReact\n                                    bootstrapURLKeys={{ key: \"AIzaSyA5zll-K3WnkRdKTRaRgbyeC_JkL76ygyM\" }}\n                                    center={this.state.center}\n                                    defaultZoom={this.props.zoom}>\n                                    <div style={{ backgroundImage: \"url('../../../../img/marker.png')\", width: \"26px\", height: \"29px\" }}\n                                        lat={this.state.center.lat}\n                                        lng={this.state.center.lng}>\n                                    </div>\n                                </GoogleMapReact>\n                            </div>\n                            <div className=\"event-details-buttons\">\n                                <Link to=\"/events\" className=\"btn btn-success btn-one\">Volver</Link>\n                                {\n                                    this.state.loggedInUser &&\n                                    <Button onClick={this.handleEventSign} className=\"btn btn-success btn-one\">Apuntarme</Button>   \n                                }\n                            </div>\n                        </Col>\n                        <Col md={{ span: 5 }}>\n                            <h4>Detalles</h4>\n                            <hr />\n                            <p> <strong>Autor: </strong> {author.username} </p>\n                            <hr />\n                            <p> <strong>Descripci&#243;n: </strong> {description} </p>\n                            <hr />\n                            <p> <strong>Direcci&#243;n: </strong> {location} </p>\n                            <hr />\n                            <p> <strong>Participantes:  </strong> {attendance} </p>\n                            <hr />\n                            <p> <strong>Asistentes: </strong> {!this.state.event && !this.state.event.assistance ? \"No hay nadie apuntado, todav�a\" : this.state.event.assistance.map(user => user.username).join(', ')} </p>\n                            <hr/>\n                            <p> <strong>Fecha: </strong> {moment(gameDate).format(\"DD/MM/YYYY h:mmA\")} </p>\n                            <hr />\n                            {this.props.loggedInUser && <Button onClick={() => this.handleModal(true)} variant=\"success\" block style={{ marginBottom: '20px' }} className=\"btn-one\">Dejar Rese&ntilde;a</Button>}\n                            <p> <strong>Rese&#241;as: </strong> {reviews} </p>\n                        </Col>\n                    </Row>\n                    <Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                        <Modal.Body>\n                            <ReviewForm loggedInUser={this.props.loggedInUser} eventId={this.state.event._id} finishEventPost={this.finishEventPost} closeModal={() => this.handleModal(false)}/>\n                        </Modal.Body>\n                    </Modal>\n\n                    <Toast variant=\"success\" onClose={() => this.handletoast(false)} show={this.state.toast.show} delay={4000} autohide>\n                        <Toast.Header><strong className=\"mr-auto\">Mensaje</strong></Toast.Header>\n                        <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n                </Container>\n            )\n        } else {\n            return  <Spinner animation=\"border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                     </Spinner>\n            \n        }\n\n    }\n}\nexport default EventDetails"]},"metadata":{},"sourceType":"module"}