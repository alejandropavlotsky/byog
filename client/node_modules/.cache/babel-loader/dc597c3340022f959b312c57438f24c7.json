{"ast":null,"code":"var _jsxFileName = \"/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/gameList/GameList.js\";\nimport React, { Component } from 'react';\nimport './GameList.css';\nimport GameService from './../../../service/game.service';\nimport UserService from './../../../service/user.service';\nimport GameCard from '../gameCard/GameCard';\nimport GameForm from '../game-form/GameForm';\nimport SearchBar from './../searchBar/SearchBar';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport Toast from 'react-bootstrap/Toast';\nimport Modal from 'react-bootstrap/Modal';\nimport Col from 'react-bootstrap/Col';\n\nclass GameList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addFavorite = favorite => {\n      let profileDataCopy = { ...this.state.profileData\n      };\n\n      if (!this.state.profileData.user.favorites.some(alreadyFav => alreadyFav === favorite)) {\n        profileDataCopy.user.favorites.push(favorite);\n        this.setState({ ...this.state,\n          profileData: profileDataCopy\n        }, () => {\n          this.userService.editUser(this.props.loggedInUser._id, this.state.profileData);\n        });\n      }\n    };\n\n    this.handleModal = visible => this.setState({\n      modalShow: visible\n    });\n\n    this.handletoast = (visible, text = '') => {\n      const toastCopy = { ...this.state.toast\n      };\n      toastCopy.show = visible;\n      toastCopy.text = text;\n      this.setState({\n        toast: toastCopy\n      });\n    };\n\n    this.filteredSearch = str => {\n      const {\n        gamesCopy\n      } = this.state;\n      const filteredresults = gamesCopy.filter(game => game.title.toLowerCase().includes(str.toLowerCase()));\n      this.setState({\n        games: filteredresults\n      });\n    };\n\n    this.getAllGames = () => {\n      this.gameService.getGames().then(response => this.setState({\n        games: response.data,\n        gamesCopy: response.data\n      })).catch(err => console.log(err));\n    };\n\n    this.componentDidMount = () => {\n      this.getAllGames();\n      this.getProfileInfo();\n    };\n\n    this.finishGamePost = () => {\n      this.getAllGames();\n      this.handleModal(false);\n      this.handletoast(true, 'El juego se ha creado con éxito!');\n    };\n\n    this.state = {\n      modalShow: false,\n      toast: {\n        show: false,\n        text: ''\n      },\n      games: [],\n      favorites: [],\n      profileData: null\n    };\n    this.gameService = new GameService();\n    this.userService = new UserService();\n  }\n\n  getProfileInfo() {\n    this.userService.getProfileInfo(this.props.loggedInUser._id).then(response => this.setState({\n      profileData: response.data\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }\n    }, \"Listado de juegos\"), /*#__PURE__*/React.createElement(Col, {\n      md: {\n        span: 4,\n        offset: 4\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }\n    }, this.props.loggedInUser && /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.handleModal(true),\n      block: true,\n      style: {\n        marginBottom: '20px'\n      },\n      className: \"btn-one\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, \"Crear nuevo juego\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, {\n      filteredSearch: this.filteredSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 6\n      }\n    }), !this.state.games.length && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 35\n      }\n    }, \"No se encontraron resultados\")), /*#__PURE__*/React.createElement(Row, {\n      className: \"games-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }, this.state.games.map(elm => /*#__PURE__*/React.createElement(GameCard, Object.assign({\n      key: elm._id\n    }, elm, {\n      addFavorite: () => this.addFavorite(elm._id),\n      loggedInUser: this.props.loggedInUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 62\n      }\n    })))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.modalShow,\n      onHide: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(GameForm, {\n      loggedInUser: this.props.loggedInUser,\n      finishGamePost: this.finishGamePost,\n      closeModal: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(Toast, {\n      onClose: () => this.handletoast(false),\n      show: this.state.toast.show,\n      delay: 4000,\n      autohide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, \"Mensaje\")), /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 6\n      }\n    }, this.state.toast.text)));\n  }\n\n}\n\nexport default GameList;","map":{"version":3,"sources":["/Users/alejandromurawczik/Movies/Programacion/ IronHack/Ironhack/week7/day5/BYOG/client/src/components/pages/gameList/GameList.js"],"names":["React","Component","GameService","UserService","GameCard","GameForm","SearchBar","Container","Row","Button","Toast","Modal","Col","GameList","constructor","props","addFavorite","favorite","profileDataCopy","state","profileData","user","favorites","some","alreadyFav","push","setState","userService","editUser","loggedInUser","_id","handleModal","visible","modalShow","handletoast","text","toastCopy","toast","show","filteredSearch","str","gamesCopy","filteredresults","filter","game","title","toLowerCase","includes","games","getAllGames","gameService","getGames","then","response","data","catch","err","console","log","componentDidMount","getProfileInfo","finishGamePost","render","span","offset","marginBottom","length","map","elm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport './GameList.css'\n\nimport GameService from './../../../service/game.service'\nimport UserService from './../../../service/user.service'\n\nimport GameCard from '../gameCard/GameCard'\nimport GameForm from '../game-form/GameForm'\nimport SearchBar from './../searchBar/SearchBar'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\nimport Col from 'react-bootstrap/Col'\n\nclass GameList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tmodalShow: false,\n\t\t\ttoast: {\n\t\t\t\tshow: false,\n\t\t\t\ttext: ''\n\t\t\t},\n\t\t\tgames: [],\n\t\t\tfavorites: [],\n\t\t\tprofileData: null\n\t\t}\n\t\tthis.gameService = new GameService()\n\t\tthis.userService = new UserService()\n\t}\n\n\taddFavorite = favorite => {\n\t\tlet profileDataCopy = {...this.state.profileData}\n\t\tif (!this.state.profileData.user.favorites.some(alreadyFav => alreadyFav === favorite)) {\n\t\t\tprofileDataCopy.user.favorites.push(favorite)\n\t\t\tthis.setState({ ...this.state, profileData: profileDataCopy }, () => {\n\t\t\t\tthis.userService.editUser(this.props.loggedInUser._id, this.state.profileData)\n\t\t\t})\n\t\t}\n\t}\n\n\thandleModal = visible => this.setState({ modalShow: visible })\n\thandletoast = (visible, text = '') => {\n\t\tconst toastCopy = { ...this.state.toast }\n\t\ttoastCopy.show = visible\n\t\ttoastCopy.text = text\n\t\tthis.setState({ toast: toastCopy })\n\t}\n\n\tfilteredSearch = str => {\n\t\tconst { gamesCopy } = this.state\n\t\tconst filteredresults = gamesCopy.filter(game => game.title.toLowerCase().includes(str.toLowerCase()))\n\t\tthis.setState({ games: filteredresults })\n\t}\n\n\tgetAllGames = () => {\n\t\tthis.gameService\n\t\t\t.getGames()\n\t\t\t.then(response => this.setState({ games: response.data, gamesCopy: response.data }))\n\t\t\t.catch(err => console.log(err))\n\t}\n\n\tgetProfileInfo() {\n        this.userService.getProfileInfo(this.props.loggedInUser._id)\n            .then((response) => this.setState({profileData: response.data}))\n    }\n\n\tcomponentDidMount = () => {\n\t\tthis.getAllGames()\n\t\tthis.getProfileInfo()\n\t}\n\n\tfinishGamePost = () => {\n\t\tthis.getAllGames()\n\t\tthis.handleModal(false)\n\t\tthis.handletoast(true, 'El juego se ha creado con éxito!')\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container as='section'>\n\t\t\t\t<h1>Listado de juegos</h1>\n\t\t\t\t<Col md={{ span: 4, offset: 4 }}>\n\t\t\t\t\t{this.props.loggedInUser && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => this.handleModal(true)}\n\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\tstyle={{ marginBottom: '20px' }}\n\t\t\t\t\t\t\tclassName='btn-one'>\n\t\t\t\t\t\t\tCrear nuevo juego\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</Col>\n\t\t\t\t<div>\n\t\t\t\t\t<SearchBar filteredSearch={this.filteredSearch} />\n\t\t\t\t\t{!this.state.games.length && <p>No se encontraron resultados</p>}\n\t\t\t\t</div>\n\n\t\t\t\t<Row className='games-list'>{this.state.games.map(elm => <GameCard key={elm._id} {...elm} addFavorite={() => this.addFavorite(elm._id)} loggedInUser={this.props.loggedInUser}/>)}</Row>\n\n\t\t\t\t<Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<GameForm\n\t\t\t\t\t\t\tloggedInUser={this.props.loggedInUser}\n\t\t\t\t\t\t\tfinishGamePost={this.finishGamePost}\n\t\t\t\t\t\t\tcloseModal={() => this.handleModal(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Toast\n\t\t\t\t\tonClose={() => this.handletoast(false)}\n\t\t\t\t\tshow={this.state.toast.show}\n\t\t\t\t\tdelay={4000}\n\t\t\t\t\tautohide>\n\t\t\t\t\t<Toast.Header>\n\t\t\t\t\t\t<strong className='mr-auto'>Mensaje</strong>\n\t\t\t\t\t</Toast.Header>\n\t\t\t\t\t<Toast.Body>{this.state.toast.text}</Toast.Body>\n\t\t\t\t</Toast>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default GameList\n"]},"metadata":{},"sourceType":"module"}